<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LaTiPee</title>
    <link rel="stylesheet" href="/css/index.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="icon" type="image/x-icon" href="/img/LaTiPee-small.png">
</head>
<body>
    <header>
    <nav class="directlink">
        <div class="seller">
            <a href="/seller">Trang b√°n h√†ng</a>
        </div>
        <div class="login">
            <% if (user) { %>
                <p>Xin Ch√†o, <%= user.userName %> üòÑ</p>
                <a href="/logout">ƒêƒÉng Xu·∫•t</a>
            <% } else { %>
                <a href="/login">ƒêƒÉng Nh·∫≠p / ƒêƒÉng K√≠</a>
            <% } %>
        </div>
    </nav>
    <div class="menu">
    <nav>
        <div class="logo">
            <img src="/img/logo.png">
        </div>
        <div class="search">
            <input type="text" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m">
            <button type="submit"><i class="fa-solid fa-magnifying-glass"></i></button>
        </div>
        <div class="icons">
            <div class="cart-icon"> 
                <a href="/cart">
                    <img src="/img/cart.png" alt="Gi·ªè h√†ng">
                </a>
            </div>
            <div class="user-icon">
                <a href="/dasboard">
                    <img src="/img/user.png" alt="Ng∆∞·ªùi d√πng">
                </a>
            </div>
        </div>
    </nav>
    </div>
    </header>
    <main>
        <div class="sliderwrap">
            <div class="wrap">
              <div class="sliderblock">
                <div id="slider">
                  <ul>
                    <li><img src="/img/banner/iphone-14-pro.jpg" alt="Images1" /></li>
                    <li><img src="/img/banner/samsung-banner.png" alt="Images1" height="100%" /></li>
                    <li><img src="/img/banner/NEEM-BANNER.webp" alt="Images1" height="100%" /></li>
                    <li><img src="/img/banner/applepay.png" alt="Images1" height="100%" /></li>
                  </ul>
                </div>
                <div class="clear"></div>
              </div>
            </div>
          </div>

        <section class="category">
            <h3>Danh m·ª•c</h3>
            <div class="selection">
                <div class="category1">
                    <span>ƒêI·ªÜN T·ª¨</span>
                </div>
                <div class="category2">
                    <span>GIA D·ª§NG</span>
                </div>
                <div class="category3">
                    <span>TH·ªúI TRANG</span>
                </div>
                <div class="category4">
                    <span>S·∫ÆC ƒê·∫∏P</span>
                </div>
            </div>
        </section>
        <div class="product-tab">
            <h1>S·∫£n ph·∫©m</h1>
        </div>
        <div id="">
            <section class="section" >

                <% products.forEach(product => { %>
                    <div class="item-product">
                        <a class="product-link" href="/product/<%= product.ProductID %>">
                            <div>
                                <img src="/img/<%= product.ImageURL %>" alt="">
                                <h3 class="product-name"><%= product.ProductName %></h3>
                                <h3 class="product-price"><%= product.Price %>ƒë</h3>
                            </div>
                        </a>
                    </div>
                <% }) %>
                
            </section>
            
            <div class="more-product">
                <button id="loadMoreBtn">Xem Th√™m...</button>
            </div>
        </div>
          
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" type="text/javascript"></script>
        <script>
            $(document).ready(function() {
                $('.search button').click(function(e) {
                    e.preventDefault();
                    const keyword = $('.search input').val();
                    $.post('/search', { keyword: keyword }, function(products) {
                        // X√≥a s·∫£n ph·∫©m hi·ªán t·∫°i tr√™n trang
                        $('.section').empty();
                
                        // Th√™m s·∫£n ph·∫©m t√¨m ƒë∆∞·ª£c v√†o trang
                        products.forEach(product => {
                            let productItem = `
                                <div class="item-product">
                                    <a href="/product/${product.id}" class="product-link">
                                    <img src="/img/${product.imageURL}" alt="">
                                    <div>
                                        <h3 class="product-name">${product.name}</h3>
                                        <h3 class="product-price">${product.price}ƒë</h3>
                                    </div>
                                    </a>
                                </div>`;
                            $('.section').append(productItem);
                        });
                    });
                });
            });
        </script>
        
        <script>
            let currentOffset = 8; // V√¨ b·∫°n ƒë√£ hi·ªÉn th·ªã 8 s·∫£n ph·∫©m ƒë·∫ßu ti√™n
          
            $('#loadMoreBtn').on('click', function() {
                $.post('/loadMoreProducts', { offset: currentOffset }, function(products) {
                    products.forEach(product => {
                        const productItem = `
                            <div class="item-product">
                                <a href="/product/${product.id}" class="product-link">
                                <img src="/img/${product.ImageURL}" alt="">
                                <div>
                                    <h3 class="product-name">${product.name}</h3>
                                    <h3 class="product-price">${product.price}ƒë</h3>
                                </div>
                                </a>
                            </div>`;
                
                        $('.section').append(productItem);
                    });
                    currentOffset += 8;
                });
            });

          </script>
        <script src="/Js/slider.js" type="text/javascript"></script>
    </main>

    <footer>
            <div class="footer-logo">
                <img src="/img/LaTiPee Logo.png" width="200px">
            </div>
            <div class="about">
                <h3>Gi·ªõi thi·ªáu:</h3>
                <ul>
                    <li><a href="#">V·ªÅ ch√∫ng t√¥i</a></li>
                    <li><a href="#">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a></li>
                    <li><a href="#">Ch√≠nh s√°ch b·∫£o m·∫≠t</a></li>
                </ul>
            </div>
            <div class="contact">
                <h3>Li√™n H·ªá:</h3>
                <ul>
                    <li><a href="#">Hotline: 1900 0000</a></li>
                    <li><a href="#">Email: Hotro.Lazipee.vn@gmail.com</a></li>
                    <li><a href="#">ƒê·ªãa ch·ªâ: 180 Cao L·ªó, Ph∆∞·ªùng 4, Qu·∫≠n 8, TP.HCM</a></li>
                </ul>
            </div>
    </footer>
</body>
</html>